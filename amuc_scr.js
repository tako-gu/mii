var sc_code=new Array,cnt;sc_code.start=function(){cnt=GetPmax(),SmaiiRate=Number(GetSCParam(1)),isMobile&&(SmaiiRate=2),init(),AddSCadd(cnt+1)},sc_code.sp_set=function(){cnt=GetPmax();var a=GetSCName(1);if(cnt>1?lno=Number(GetSCParam(2)):lno=0,0===cg[lno].eof&&loadcg(lno,a),3===cg[lno].eof){var e=10;switch(cnt>2&&(e=GetSCParam(3)),e){case-1:x=-cg[lno].cv.width;break;case 21:x=cv1.width;break;default:x=cv1.width*e/20-cg[lno].cv.width/2}var t=2;switch(cnt>3&&(t=GetSCParam(4)),t){case 0:y=0;break;case 1:y=(cv1.height-cg[lno].cv.height)/2;break;case 2:y=cv1.height-cg[lno].cv.height}set_pos(lno,x,y),AddSCadd(cnt+1)}},sc_code.sp_set_ex=function(){cnt=GetPmax();var a=GetSCName(1);lno=Number(GetSCParam(2)),0===cg[lno].eof&&loadcg(lno,a),3===cg[lno].eof&&(cnt>3&&set_pos(lno,GetSCParam(3)/SmaiiRate,GetSCParam(4)/SmaiiRate),AddSCadd(cnt+1))},sc_code.sp_set_pos_ex=function(){cnt=GetPmax(),set_pos(GetSCParam(0),GetSCParam(1)/SmaiiRate,GetSCParam(2)/SmaiiRate),AddSCadd(cnt+1)},sc_code.sp_set_pos_move=function(){cnt=GetPmax(),lno=GetSCParam(1),x=Number(cg[lno].x),y=Number(cg[lno].y),x+=Number(GetSCParam(2))/SmaiiRate,y+=Number(GetSCParam(3))/SmaiiRate,set_pos(lno,x,y),AddSCadd(cnt+1)},sc_code.sp_set_alpha=function(){cnt=GetPmax(),set_alpha(GetSCParam(1),GetSCParam(2)/255),AddSCadd(cnt+1)},sc_code.set_render_mode=function(){cnt=GetPmax(),set_render(GetSCParam(1),GetSCParam(2)),AddSCadd(cnt+1)},sc_code.set_filter=function(){cnt=GetPmax(),lno=Number(GetSCParam(1)),set_filter(cg[lno],Number(GetSCParam(2))),AddSCadd(cnt+1)},sc_code.sp_set_scale=function(){cnt=GetPmax(),lno=GetSCParam(1),cg[lno].scale=Number(GetSCParam(2))/100,AddSCadd(cnt+1)},sc_code.sp_set_rotate=function(){cnt=GetPmax(),lno=GetSCParam(1),cg[lno].rx=GetSCParam(2),cg[lno].ry=GetSCParam(3),cg[lno].rz=GetSCParam(4),AddSCadd(cnt+1)},sc_code.sp_cls=function(){cnt=GetPmax(),lno=Number(GetSCParam(1)),cg_cls(lno),AddSCadd(cnt+1)},sc_code.msp_set=function(){cnt=GetPmax(),fname=GetSCName(1),lno=GetSCParam(2),x=Number(GetSCParam(3))/SmaiiRate,y=Number(GetSCParam(4))/SmaiiRate,set_pos(lno,x,y),cg[lno].mflag?cg[lno].movie.pause():(cg[lno].movie=document.createElement("video"),cg[lno].movie.preload="auto"),cg[lno].movie.src="em/"+fname+".mp4",cnt>4?cg[lno].movie.loop=Number(GetSCParam(5)):cg[lno].movie.loop=1,cg[lno].mflag=1,cg[lno].eof=3,AddSCadd(cnt+1)},sc_code.movie_play=function(){cnt=GetPmax(),ClickFlag=0,fname=GetSCName(1),movie.autoplay=1,movie.volume=.2,movie.codecs="avc1.42E01F, mp4a.40.2",movie_stime=(new Date).getTime(),movie_flag=1,movie.src="movie/"+fname+".mp4",AddSCadd(cnt+1)},sc_code.movie_wait=function(){if(movie.ended)return cnt=GetPmax(),movie.src="",movie_flag=0,void AddSCadd(cnt+1);var a=(new Date).getTime();return a-movie_stime>1e3&&ClickFlag|SkipFlag?(movie.pause(),movie.src="",movie_flag=0,AddSCadd(1),void(ClickFlag=0)):void 0},sc_code.bgm_play=function(){cnt=GetPmax(),fname=GetSCName(1),bgm[0].loop=1,BgmFlag&&(bgm[0].autoplay=1),bgm[0].volume=BgmVolume,isMP3?bgm[0].src="bgm/"+fname+".mp3":bgm[0].src="bgm/"+fname+".ogg",bgmFadeT=0,AddSCadd(cnt+1)},sc_code.bgm_stop=function(){cnt=GetPmax(),bgmFadeT=Number(GetSCParam(1)),!bgmFadeT|SkipFlag&&(bgm[0].pause(),bgm[0].src="",bgmFadeT=0),bgmFadeS=(new Date).getTime(),AddSCadd(cnt+1)},sc_code.se_play_ex=function(){cnt=GetPmax();var a,e=-1,t=0,c=0,r=1;if(cnt>3)e=GetSCParam(1),a=GetSCName(2),t=GetSCParam(3),c=GetSCParam(4),cnt>4&&(r=GetSCParam(5));else{if(-1==e){for(e=0;e<se.length;e++)if(!se[e].src.length||se[e].ended){se[e].src="";break}if(e>=max_se){for(e=0;e<se.length;e++)se[e].src="";e=0}}3==cnt&&(c=GetSCParam(3)),cnt>1&&(t=GetSCParam(2)),a=GetSCName(1)}PlaySeCh=e,1&t?se[e].loop=1:se[e].loop=0,SeFlag?se[e].autoplay=1:se[e].autoplay=0,se[e].volume=SeVolume,isMP3?se[e].src="se/"+a+".mp3":se[e].src="se/"+a+".ogg",0==(2&t)?AddSCadd(cnt+1):se_wait=1},sc_code.se_stop=function(){cnt=GetPmax();var a=-1,e=0;cnt&&(a=GetSCParam(1)),cnt>1&&(e=GetSCParam(2));for(var t=0;t<se.length;t++)-1!=a&&t!=a||(se[t].pause(),se[t].src="",se[t].loop=0,se[t].autoplay=0);AddSCadd(cnt+1)},sc_code.se_wait=function(){var a=GetSCParam(1);return ClickFlag|SkipFlag?(se[a].src="",cnt=GetPmax(),void AddSCadd(cnt+1)):void(se[a].ended&&(se[a].src="",cnt=GetPmax(),AddSCadd(cnt+1)))},sc_code.voice_replay=function(){cnt=GetPmax(),VoiceFlag&&(voi[0].autoplay=1,voi[0].volume=VoiceVolume,isMP3?VoiceName="voice/"+fname+".mp3":VoiceName="voice/"+fname+".ogg",voi[0].src=VoiceName),voiFadeT=0,AddSCadd(cnt+1)},sc_code.text_hide=function(){cnt=GetPmax(),cg[tbaseL].status=1,NameTagFlag&&NameTag(0),AddSCadd(cnt+1)},sc_code.text_show=function(){cnt=GetPmax(),cg[tbaseL].status=0,NameTagFlag&&NameTag(1),AddSCadd(cnt+1)},sc_code.text=function(){cg[tbaseL].status&&(cg[tbaseL].status=0,icg[tbaseL].status=0),VoiceCut&&(voi[0].src="",VoiceName=""),cnt=GetPmax(),NameMoji="",TextMoji="",cnt>2?(NameMoji=GetSCParam0(2),TextMoji=GetSCParam0(3)):cnt>1?(NameMoji=GetSCParam0(1),TextMoji=GetSCParam0(2)):TextMoji=GetSCParam0(1),textMake(),fname="",cnt>2&&(fname=GetSCName(1)),voicePlay(fname),TextStime=(new Date).getTime(),TextDno=0,TextFlag=1,tAnimeNow=1},sc_code.text_w=function(){cg[tbaseL].status&&(cg[tbaseL].status=0,icg[tbaseL].status=0),VoiceCut&&(voi[0].src="",VoiceName=""),cnt=GetPmax(),NameMoji="",TextMoji="",cnt>2?(NameMoji=GetSCParam(2),TextMoji=GetSCParam(3)):cnt>1?(NameMoji=GetSCParam(1),TextMoji=GetSCParam(2)):TextMoji=GetSCParam(1),textMake(),fname="",cnt>2&&(fname=GetSCName(1)),voicePlay(fname),TextStime=(new Date).getTime(),TextDno=0,TextFlag=1,tAnimeNow=4,WaitAniFlag=0,AddSCadd(cnt+1)},sc_code.text_clear=function(){cnt=GetPmax(),NameMoji="",TextMoji="",VoiceName="",voi[0].src="",ctx[2].clearRect(0,0,namearea[2]/SmaiiRate,namearea[3]/SmaiiRate),ctx[3].clearRect(0,0,textarea[2]/SmaiiRate,textarea[3]/SmaiiRate),tAnimeNow=0,AddSCadd(cnt+1)},sc_code.wait_click=function(){if(ClickFlag|SkipFlag)return cnt=GetPmax(),Wait=-1,AddSCadd(cnt+1),ClickFlag=0,WaitAniFlag=0,void(tAnimeNow=0);if(WaitAniFlag=1,-1!=GetSCParam(1))if(-1===Wait)Wait=GetSCParam(1),StartTime=(new Date).getTime();else{var a=(new Date).getTime();a-StartTime>Wait&&(Wait=-1,AddSCadd(2))}},sc_code["return"]=function(){sc_step=stack.pop(),brNode=stackBr.pop(),stackNo--},sc_code["#var"]=function(){cnt=GetPmax(),GetParam(script[sc_step+1],1),AddSCadd(cnt+1)},sc_code["var"]=function(){cnt=GetPmax(),GetParam(script[sc_step+1],1),AddSCadd(cnt+1)},sc_code["if"]=function(){cnt=GetPmax();var a=GetSCParam(1);a?bracketF[brNode]=1:bracketF[brNode]=0,AddSCadd(cnt+1)},sc_code["else"]=function(){cnt=GetPmax(),bracketF[brNode]^=1,AddSCadd(cnt+1)},sc_code.select_init=function(){if(3===selCg.eof)AddSCadd(cnt+1);else if(0===selCg.eof){cnt=GetPmax();var a=GetSCName(1);loadcgs(selCg,a),SelAlpha=GetSCParam(2)}},sc_code.select_begin=function(){for(selFlag=0,cnt=GetPmax();selData.length;)selData.pop(),selLabel.pop(),selX.pop(),selY.pop();AddSCadd(cnt+1)},sc_code.select_end=function(){if(selFlag){if(ClickFlag|SkipFlag){for(var a=selCg.cv.height/2,e=selCg.cv.width,t=0;t<selData.length;t++)if(mouse_x>selX[t]&&mouse_x<selX[t]+e&&mouse_y>selY[t]&&mouse_y<selY[t]+a)for(var c=0;c<lab_dat.length;c++)if(lab_dat[c]==selLabel[t]){for(sc_step=lab_add[c];selData.length;)selData.pop(),selLabel.pop(),selX.pop(),selY.pop();selFlag=0,ClickFlag=0}ClickFlag=0}}else ClickFlag=0,selFlag=1},sc_code.select=function(){cnt=GetPmax(),selData.push(GetSCParam(1)),selLabel.push(GetSCParam(2)),selX.push(Number(GetSCParam(3))/SmaiiRate),selY.push(Number(GetSCParam(4))/SmaiiRate),AddSCadd(cnt+1)},sc_code["goto"]=function(){for(var a=GetSCParam(1),e=0;e<lab_dat.length;e++)lab_dat[e]==a&&(sc_step=lab_add[e])},sc_code.exit=function(){clearInterval(OrgInv2),clearInterval(OrgInv1),DrawFlag=0;for(var a=0;a<full_layer;a++)void 0!=cg[a]&&(3===cg[a].eof&&cg[a].img&&delete cg[a].img,3===icg[a].eof&&(2===icg[a].mflag&&(icg[a].movie.pause(),delete icg[a].movie),icg[a].img&&delete icg[a].img),delete cg[a],delete icg[a]);movie_flag&&(void 0!=movie&&(movie.pause(),delete movie),movie_flag=0),ScLoop=0},sc_code.btn_init=function(){cnt=GetPmax();var a=0;cnt>2&&(a=Number(GetSCParam(1))),btng[a]=new btnGrp,btng[a].status=0,btng[a].btn=Array();var e;e=GetSCName(cnt-1),e.length&&(btng[a].click_se=document.createElement("audio"),isMP3?btng[a].click_se.src=e+".mp3":btng[a].click_se.src=e+".ogg"),e=GetSCName(cnt),e.length&&(btng[a].on_se=document.createElement("audio"),isMP3?btng[a].on_se.src=e+".mp3":btng[a].on_se.src=e+".ogg"),AddSCadd(cnt+1)},sc_code.btn_uninit=function(){cnt=GetPmax();var a=0;cnt&&(a=Number(GetSCParam(1))),btng[a].status|=16,AddSCadd(cnt+1)},sc_code.btn_lock=function(){cnt=GetPmax();var a=GetSCParam(1);btng[a].status|=1,AddSCadd(cnt+1)},sc_code.btn_unlock=function(){cnt=GetPmax();var a=GetSCParam(1);1&btng[a].status&&(btng[a].status^=1),AddSCadd(cnt+1)},sc_code.btn_set=function(){cnt=GetPmax();var a,e=0;cnt>3?(e=Number(GetSCParam(1)),a=Number(GetSCParam(2))):a=Number(GetSCParam(1)),void 0===btng[e].btn[a]&&(btng[e].btn[a]=new btnfc,btng[e].btn[a].status=0);var t=btng[e].btn[a];if(void 0===t.cg){switch(t.id=a,t.on_mouse="",t.off_mouse="",t.option=1,t.status=8,t.style=0,cnt){case 3:t.fname=GetSCName(2),t.click_mouse=GetSCParam(3);break;case 7:t.option=GetSCParam(7);case 6:t.off_mouse=GetSCParam(6);case 5:t.on_mouse=GetSCParam(5);case 4:t.fname=GetSCName(3),t.click_mouse=GetSCParam(4)}t.cg=new pict,t.cg.cv=document.createElement("canvas"),t.cg.eof=0,loadcgs(t.cg,t.fname)}else 3===t.cg.eof&&(AddSCadd(cnt+1),ClickFlag=0)},sc_code.btn_release=function(){cnt=GetPmax();var a=GetSCParam(1),e=-1;cnt>1&&(e=Number(GetSCParam(2)));for(var t=0;t<btng[a].btn.length;t++)t!=e&&-1!=e||void 0!=btng[a].btn[t]&&(btng[a].btn[t].status|=16);AddSCadd(cnt+1)},sc_code.btn_set_pos=function(){cnt=GetPmax();var a=GetSCParam(1),e=GetSCParam(2);btng[a].btn[e].cg.x=Number(GetSCParam(3))/SmaiiRate,btng[a].btn[e].cg.y=Number(GetSCParam(4))/SmaiiRate,AddSCadd(cnt+1)},sc_code.btn_set_rect=function(){cnt=GetPmax();var a=GetSCParam(1),e=GetSCParam(2);btng[a].btn[e].width=Number(GetSCParam(3))/SmaiiRate,btng[a].btn[e].height=Number(GetSCParam(4))/SmaiiRate,btng[a].btn[e].w_offset=Number(GetSCParam(5))/SmaiiRate,btng[a].btn[e].h_offset=Number(GetSCParam(6))/SmaiiRate,AddSCadd(cnt+1)},sc_code.btn_set_alpha=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=Number(GetSCParam(2)),t=Number(GetSCParam(3));void 0!=btng&&void 0!=btng[a]&&void 0!=btng[a].btn[e]&&(btng[a].btn[e].cg.alpha=t/255),AddSCadd(cnt+1)},sc_code.btn_set_status=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=Number(GetSCParam(2));btng[a].btn[e].status=GetSCParam(3),AddSCadd(cnt+1)},sc_code.btn_enable=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=Number(GetSCParam(2)),t=0;cnt>2&&(t=GetSCParam(3));for(var c=0;c<btng[a].btn.length;c++)c!=e&&-1!=e||(t?btng[a].btn[c].status|=4:4&btng[a].btn[c].status&&(btng[a].btn[c].status^=4));AddSCadd(cnt+1)},sc_code.btn_expansion=function(){cnt=GetPmax();for(var a=Number(GetSCParam(1)),e=Number(GetSCParam(2)),t=Number(GetSCParam(3)),c=0;c<btng[a].btn.length;c++)c!=e&&-1!=e||(btng[a].btn[c].style=t,btng[a].btn[c].status|=4);AddSCadd(cnt+1)},sc_code.wait_message=function(){cnt=GetPmax(),AddSCadd(cnt+1)},sc_code["while"]=function(){cnt=GetPmax();var a=Number(GetSCParam(1));a?bracketF[brNode]=-sc_step:bracketF[brNode]=0,AddSCadd(cnt+1)},sc_code["break"]=function(){cnt=GetPmax(),AddSCadd(cnt+1)},sc_code.debug=function(){cnt=GetPmax();var a=0;cnt&&(a=Number(GetSCParam(1))),AddSCadd(cnt+1)},sc_code.log=function(){cnt=GetPmax();GetSCParam0(1);AddSCadd(cnt+1)},sc_code.text_init=function(){cnt=GetPmax(),fontSize=Number(GetSCParam(1)),textarea[0]=Number(GetSCParam(2)),textarea[1]=Number(GetSCParam(3)),textarea[3]=Number(GetSCParam(4)),textarea[4]=Number(GetSCParam(5)),namearea[0]=Number(GetSCParam(6)),namearea[1]=Number(GetSCParam(7)),fontSize=Number(GetSCParam(1)),AddSCadd(cnt+1)},sc_code.text_set_base=function(){if(cnt=GetPmax(),3===cg[tbaseL].eof)AddSCadd(cnt+1);else if(0===cg[tbaseL].eof){var a=GetSCName(1);loadcg(tbaseL,a),cnt>2&&(cg[tbaseL].x=Number(GetSCParam(2)/SmaiiRate),cg[tbaseL].y=Number(GetSCParam(3)/SmaiiRate)),cg[tbaseL].alpha=tbaseA/255,cg[tbaseL].status=1}},sc_code.text_init_base=function(){cg_del(cg[tbaseL]),cnt=GetPmax(),AddSCadd(cnt+1)},sc_code.shake=function(){if(ShakeFlag){var a=(new Date).getTime();if(a-ShakeStart<ShakeTime){for(var e=0;e<max_layer;e++)if(3===icg[e].eof)switch(ShakeType){case 0:cg[e].ey=Math.floor(Math.random()*ShakeRenge),icg[e].ey=cg[e].ey;break;case 1:cg[e].ex=Math.floor(Math.random()*ShakeRenge),icg[e].ex=cg[e].ex;break;case 2:cg[e].ex=Math.floor(Math.random()*ShakeRenge),icg[e].ex=cg[e].ex,cg[e].ey=Math.floor(Math.random()*ShakeRenge),icg[e].ey=cg[e].ey}}else{cnt=GetPmax();for(var e=0;e<max_layer;e++)3===cg[e].eof&&(icg[e].ex=cg[e].ex=0,icg[e].ey=cg[e].ey=0);AddSCadd(cnt+1),ShakeFlag=0}}else ShakeType=Number(GetSCParam(1)),ShakeRenge=Number(GetSCParam(2))+1,ShakeTime=1e3,ShakeOption=0,cnt=GetPmax(),cnt>3&&(ShakeOption=Number(GetSCParam(4))),cnt>2&&(ShakeTime=Number(GetSCParam(3))),ShakeStart=(new Date).getTime(),ShakeFlag=1},sc_code.flash=function(){if(FlashFlag){var a=(new Date).getTime();if(a-FlashStart<FlashTime){var e=(FlashTime-(a-FlashStart))/FlashTime,t=Math.floor(FlashR*e),c=Math.floor(FlashG*e),r=Math.floor(FlashB*e);FlashColor="rgb("+t+","+c+","+r+")"}else cnt=GetPmax(),AddSCadd(cnt+1),FlashFlag=0}else FlashR=FlashG=FlashB=255,FlashTime=200,cnt=GetPmax(),cnt>3&&(FlashTime=Number(GetSCParam(4))),cnt&&(FlashR=Number(GetSCParam(1)),FlashG=Number(GetSCParam(2)),FlashB=Number(GetSCParam(3))),FlashStart=(new Date).getTime(),FlashColor="rgb("+FlashR+","+FlashG+","+FlashB+")",FlashFlag=1},sc_code.wait=function(){if(ClickFlag|SkipFlag)return cnt=GetPmax(),Wait=-1,AddSCadd(cnt+1),ClickFlag=0,WaitAniFlag=0,void(tAnimeNow=0);if(-1!=GetSCParam(1))if(-1===Wait)Wait=GetSCParam(1),StartTime=(new Date).getTime();else{var a=(new Date).getTime();a-StartTime>Wait&&(Wait=-1,AddSCadd(2))}},sc_code.action_run=function(){cnt=GetPmax();var a,e=(new Date).getTime(),t=-1;cnt>1?(t=Number(GetSCParam(1)),a=Number(GetSCParam(2))):a=Number(GetSCParam(1));for(var c=0;c<acl.length;c++)c!=t&&-1!=t||(acl[c].status=1,acl[c].time=a,acl[c].timeS=e,acl[c].loop=0,void 0!=acl[c].act[0]&&(acl[c].act[0].timeS=e));AddSCadd(cnt+1)},sc_code.action_run_all=function(){cnt=GetPmax();for(var a=Number(GetSCParam(1)),e=(new Date).getTime(),t=0;t<acl.length;t++)acl[t].status=1,acl[t].time=a,acl[t].timeS=e,acl[t].loop=0,void 0!=acl[t].act[0]&&(acl[t].act[0].timeS=e);AddSCadd(cnt+1)},sc_code.action_sync_run=function(){cnt=GetPmax();var a,e=-1;cnt>1?(e=Number(GetSCParam(1)),a=Number(GetSCParam(2))):a=Number(GetSCParam(1));for(var t=(new Date).getTime(),c=0;c<acl.length;c++)c!=e&&-1!=e||(acl[c].status=5,acl[c].time=a,acl[c].timeS=t,acl[c].loop=0,void 0!=acl[c].act[0]&&(acl[c].act[0].timeS=t));act_syncNo=e,act_sync=1},sc_code.action_sync_run_all=function(){cnt=GetPmax();for(var a=Number(GetSCParam(1)),e=(new Date).getTime(),t=0;t<acl.length;t++)acl[t].status=5,acl[t].time=a,acl[t].timeS=e,acl[t].loop=0,void 0!=acl[t].act[0]&&(acl[t].act[0].timeS=e);act_syncA=1},sc_code.action_loop_run=function(){cnt=GetPmax();var a=-1,e=-1;switch(cnt){case 2:e=Number(GetSCParam(1)),a=Number(GetSCParam(2));break;case 1:a=Number(GetSCParam(2))}for(var t=(new Date).getTime(),c=0;c<acl.length;c++)c!=e&&-1!=e||(acl[c].loop=-1,acl[c].status=3,acl[c].time=-1,acl[c].timeS=t,void 0!=acl[c].act[0]&&(acl[c].act[0].timeS=t));AddSCadd(cnt+1)},sc_code.action_loop_run_all=function(){cnt=GetPmax();var a=-1;cnt&&(a=Number(GetSCParam(1)));for(var e=(new Date).getTime(),t=0;t<acl.length;t++)acl[t].loop=-1,acl[t].status=3,acl[t].time=-1,acl[t].timeS=e,void 0!=acl[t].act[0]&&(acl[t].act[0].timeS=e);AddSCadd(cnt+1)},sc_code.action_clear=function(){cnt=GetPmax();var a=0;cnt&&(a=Number(GetSCParam(1))),ActClr(a),AddSCadd(cnt+1)},sc_code.set_action_clear=function(){cnt=GetPmax(),AddSCadd(cnt+1)},sc_code.action_clear_all=function(){cnt=GetPmax(),ActClrAll(),AddSCadd(cnt+1)},sc_code.action_sync_wait=function(){cnt=GetPmax(),AddSCadd(cnt+1)},sc_code.action_set_straight=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="straight";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].time=Number(GetSCParam(5)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_straight2=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="straight2";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].time=Number(GetSCParam(5)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_accele=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="accele";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].time=Number(GetSCParam(5)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_decele=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="decele";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].time=Number(GetSCParam(5)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_shake=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="shake";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].time=Number(GetSCParam(5)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_shake2=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="shake2";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].prm.push(Number(GetSCParam(5))),acl[a].act[e].time=Number(GetSCParam(6)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_fade=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="fade";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].time=Number(GetSCParam(4)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_btn_fade=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="btn";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2)),r=Number(GetSCParam(3));acl[a].act[e].layer=c<<16|r,acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].time=Number(GetSCParam(5)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_wait=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="wait";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t,acl[a].act[e].time=Number(GetSCParam(2)),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_rotate=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="rotate";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].prm.push(Number(GetSCParam(5))),acl[a].act[e].time=Number(GetSCParam(6)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_rotate_ex=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="rotate_ex";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].prm.push(Number(GetSCParam(5))),acl[a].act[e].prm.push(Number(GetSCParam(6))),acl[a].act[e].time=Number(GetSCParam(7)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_scale=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="scale";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].time=Number(GetSCParam(4)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_scale_ex=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="scale_ex";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].time=Number(GetSCParam(5)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.action_set_movepos=function(){cnt=GetPmax();var a=Number(GetSCParam(1)),e=acl[a].act.length,t="movepos";acl[a].act[e]=new action,acl[a].act[e].prm=new Array,acl[a].act[e].spm=new Array,acl[a].act[e].cmd=t;var c=Number(GetSCParam(2));acl[a].act[e].layer=c,acl[a].act[e].prm.push(Number(GetSCParam(3))),acl[a].act[e].prm.push(Number(GetSCParam(4))),acl[a].act[e].time=Number(GetSCParam(5)),acti[t](acl[a].act[e]),acl[a].act_cnt++,AddSCadd(cnt+1)},sc_code.strgetcf=function(){cnt=GetPmax();var a=GetSCParam0(1),e=GetSCName(2),t=Number(GetSCParam(3)),c=Number(GetSCParam(4));var_set(a,'"'+e.substring(t,t+c)+'"'),AddSCadd(cnt+1)},sc_code.sp_get_w=function(){cnt=GetPmax();var a=GetSCParam0(1),e=Number(GetSCParam(2));var_set(a,cg[e].cv.width),AddSCadd(cnt+1)},sc_code.sp_get_h=function(){cnt=GetPmax();var a=GetSCParam0(1),e=Number(GetSCParam(2));var_set(a,cg[e].cv.height),AddSCadd(cnt+1)},sc_code.sp_get_alpha=function(){cnt=GetPmax();var a=GetSCParam0(1),e=Number(GetSCParam(2));var_set(a,Math.floor(255*cg[e].alpha)),AddSCadd(cnt+1)},sc_code.sp_get_scale=function(){cnt=GetPmax();var a=GetSCParam0(1),e=Number(GetSCParam(2));var_set(a,Math.floor(100*cg[e].scale)),AddSCadd(cnt+1)},sc_code.sp_get_pos=function(){cnt=GetPmax();var a=GetSCParam0(1),e=Number(GetSCParam(2));var_set(a,cg[e].pos),AddSCadd(cnt+1)},sc_code.voice_stop=function(){cnt=GetPmax();var a=0;voiFadeT=0,cnt&&(a=Number(GetSCParam(1)),cnt>1&&(voiFadeT=Number(GetSCParam(2)))),!voiFadeT|SkipFlag&&(voi[0].pause(),voi[0].src="",voiFadeT=0),voiFadeS=(new Date).getTime(),AddSCadd(cnt+1)},sc_code.voice_play=function(){cnt=GetPmax();var a,e=0,t=0,c=0;cnt>3?(e=Number(GetSCParam(1)),a=GetSCName(2),t=Number(GetSCParam(3)),c=Number(GetSCParam(4))):(a=GetSCName(1),cnt>2&&(c=Number(GetSCParam(3))),cnt>1&&(t=Number(GetSCParam(2)))),voicePlay(a),voiFadeT=0,AddSCadd(cnt+1)},sc_code.voice_mute=function(){cnt=GetPmax();var a=Number(GetSCParam(1));voi[0].muted=a,AddSCadd(cnt+1)},sc_code.face_init=function(){cnt=GetPmax();var a=0;cnt>3?(a=Number(GetSCParam(1)),FaceLayer=Number(GetSCParam(2)),FaceX=Number(GetSCParam(3)/SmaiiRate),FaceY=Number(GetSCParam(4)/SmaiiRate)):(FaceLayer=Number(GetSCParam(1)),FaceX=Number(GetSCParam(2)/SmaiiRate),FaceY=Number(GetSCParam(3)/SmaiiRate)),FaceFlag=0,AddSCadd(cnt+1)},sc_code.face_set=function(){if(cnt=GetPmax(),3===cg[FaceLayer].eof&&(set_pos(FaceLayer,FaceX+FaceOX-cg[FaceLayer].cv.width/2,FaceY+FaceOY-cg[FaceLayer].cv.height),FaceFlag=1,cg[FaceLayer].status=1,AddSCadd(cnt+1)),0===cg[FaceLayer].eof){var a=0;FaceOX=0,FaceOY=0;var e;e=GetSCName(1),cnt>2?(a=Number(GetSCParam(2)),FaceOX=Number(GetSCParam(3)/SmaiiRate),FaceOY=Number(GetSCParam(4)/SmaiiRate)):a=Number(GetSCParam(2)),fname=e,loadcg(FaceLayer,e)}},sc_code.face_cls=function(){cnt=GetPmax(),lno=Number(GetSCParam(1)),cg_del(cg[lno]),FaceFlag=0,AddSCadd(cnt+1)},sc_code.messagebox=function(){cnt=GetPmax();var a=GetSCParam(1);alert(a),AddSCadd(cnt+1)},sc_code.set_window_text=function(){cnt=GetPmax();GetSCParam(1);AddSCadd(cnt+1)},sc_code.strcat=function(){cnt=GetPmax();var a=GetSCParam0(1),e=GetSCParam(2),t=GetSCParam(3);var_set(a,e+"/"+t),AddSCadd(cnt+1)},sc_code.strcpy=function(){cnt=GetPmax();var a=GetSCParam0(1),e=GetSCParam(2);var_set(a,e),AddSCadd(cnt+1)},sc_code.run=function(){cnt=GetPmax(),FadeFlag=0,cnt>0&&(FadeFlag=GetSCParam(1)),FadeTime=0,cnt>1&&(FadeTime=GetSCParam(2)),run(),FadeFlag?(FadeNow=(new Date).getTime(),FadeAlpha=0,ClickFlag=0,run_wait=1):(FadeFlag=0,AddSCadd(cnt+1)),BackNo^=1,DrawFlag=1},sc_code.run_no_wait=function(){cnt=GetPmax(),run(),AddSCadd(cnt+1),DrawFlag=1},sc_code["("]=function(){AddSCadd(1)},sc_code[")"]=function(){AddSCadd(1)},sc_code["{"]=function(){var a;for(a=0;bracketS[a]!=sc_step;a++);if(bracketF[brNode]<0?(bracketP[a]=-bracketF[brNode],bracketF[brNode]=1):bracketP[a]=0,1==bracketF[brNode])brNode++,AddSCadd(1);else{for(varDelNode(brNode+1),a=0;bracketS[a]!=sc_step;a++);sc_step=bracketE[a]+1}},sc_code["}"]=function(){var a;for(varDelNode(brNode),brNode--,AddSCadd(1),a=0;bracketE[a]!=sc_step-1;a++);if(bracketP[a])return void(sc_step=bracketP[a]);if(stackBr.length){var e=stackBr[stackBr.length-1];brNode==e&&stack.length&&(sc_step=stack.pop(),brNode=stackBr.pop(),stackNo--)}},sc_code.random=function(){cnt=GetPmax();var a=GetSCParam0(1),e=Math.floor(Math.random()*Number(GetSCParam(2)));var_set(a,e),AddSCadd(cnt+1)},sc_code.charAt=function(){cnt=GetPmax();var a=GetSCParam0(1),e=GetSCParam(2),t=GetSCParam(3);var_set(a,e.charAt(t)),AddSCadd(cnt+1)},sc_code.key_off=function(){cnt=GetPmax();var a=Number(GetSCParam(1));key_off=a,AddSCadd(cnt+1)},sc_code["default"]=function(){var a=script[sc_step];if(void 0===a)return clearInterval(OrgInv1),clearInterval(OrgInv2),void(DrawFlag=0);var e=SubProc(a);if(e){var t=0;if("("==script[sc_step+1])for(;")"!=script[sc_step+t+2];t++)stack.push(GetSCParam(t+1)),stackNo++;var c=e-1,r=sub_param[c].length;if(r==t){brNode++;for(var m=t-1;m>=0;m--)var_set(sub_param[c][m],varGet(stack.pop())),stackNo--;brNode--}else{brNode++;for(var m=r-1;m>=0;m--)m>t-1?var_set(sub_param[c][m],0):var_set(sub_param[c][m],varGet(stack.pop()));brNode--}var n=sc_step+t+3;sc_step=sub_add[c],stack.push(n),stackBr.push(brNode),stackNo++,bracketF[brNode]=1}else{GetSCParam(0);AddSCadd(1)}};