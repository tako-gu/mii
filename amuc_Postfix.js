function calcPostfix(p){var a=new Array,s=new Array;for(i=0;i<p.length;i++){var e,r,o,c=p[i];switch(c){case"+":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r+e),s.push(r+e);break;case"-":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r-e),s.push(r-e);break;case"*":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r*e),s.push(r*e);break;case"/":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r/e),s.push(r/e);break;case"%":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r%e),s.push(r%e);break;case"++":e=s.pop(),a.pop(c),o=varfnd(e),-1!=o?(var_data[o]++,e=var_data[o]):e++,a.push(e),s.push(e);break;case"--":e=s.pop(),a.pop(c),o=varfnd(e),-1!=o?(var_data[o]--,e=var_data[o]):e--,a.push(e),s.push(e);break;case"&&":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r&&e),s.push(r&&e);break;case"||":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r||e),s.push(r||e);break;case"!":e=a.pop(),s.pop(c),a.push(!e),s.push(!e);break;case"&":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r&e),s.push(r&e);break;case"|":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r|e),s.push(r|e);break;case"^":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r^e),s.push(r^e);break;case"<<":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r<<e),s.push(r<<e);break;case">>":e=a.pop(),r=a.pop(),s.pop(c),s.pop(c),a.push(r>>e),s.push(r>>e);break;case"==":s.pop(),s.pop(),e=popStc(a),r=popStc(a),e==r?(a.push(1),s.push(1)):(a.push(0),s.push(0));break;case"!=":s.pop(),s.pop(),popStc(a)!=popStc(a)?(a.push(1),s.push(1)):(a.push(0),s.push(0));break;case"<":e=popStc(a),r=popStc(a),s.pop(c),s.pop(c),e>r?(a.push(1),s.push(1)):(a.push(0),s.push(0));break;case"<=":e=popStc(a),r=popStc(a),s.pop(c),s.pop(c),e>=r?(a.push(1),s.push(1)):(a.push(0),s.push(0));break;case">":e=popStc(a),r=popStc(a),s.pop(c),s.pop(c),r>e?(a.push(1),s.push(1)):(a.push(0),s.push(0));break;case">=":e=popStc(a),r=popStc(a),s.pop(c),s.pop(c),r>=e?(a.push(1),s.push(1)):(a.push(0),s.push(0));break;case"=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),"string"==typeof r&&(r=r.replace(/\"/g,"")),o=varfnd(e),-1!=o?var_data[o]=r:(var_name.push(e),var_node.push(brNode),var_data.push(r),var_cnt++),a.push(r),s.push(r);break;case"+=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]+=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;case"-=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]-=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;case"*=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]*=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;case"/=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]/=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;case"%=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]%=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;case"&=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]&=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;case"|=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]|=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;case"^=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]^=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;case"<<=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]<<=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;case">>=":a.pop(),r=a.pop(),e=s.pop(c),s.pop(c),o=varfnd(e),-1!=o?(var_data[o]>>=r,r=var_data[o]):errVal(r),a.push(r),s.push(r);break;default:s.push(c),a.push(varGet(c))}}return a[0]}function split_formula(p){var a=new Array,s="";for("-"==p.charAt(0)&&(p="0"+p),i=0;i<p.length;i++){var e=p.charAt(i),r=e+p.charAt(i+1),o=r+p.charAt(i+2);switch(o){case">>=":case"<<=":""!=s&&(a.push(s),s=""),a.push(o),i+=2;break;default:switch(r){case"++":case"--":""!=s&&(a.push(s),s=""),-1!=naCheck(p.charAt(i+2))?(a.push(r),i++):a.push(e);break;case">>":case"<<":case"&&":case"||":case"+=":case"-=":case"/=":case"*=":case"/=":case"%=":case"==":case"!=":case"<=":case">=":case"&=":case"|=":case"^=":""!=s&&(a.push(s),s=""),a.push(r),i++;break;default:-1!="+-*/%^&|!()<>=".indexOf(e)?(""!=s&&(a.push(s),s=""),a.push(e)):s+=e}}}return""!=s&&(a.push(s),s=""),a}function get_postfix(p){var a=new Array,s=new Array;return expression(p,a,s),a}function factor(p,a,s){"("==p[0]?(p.shift(),expression(p,a,s),")"==p[0]&&p.shift()):a.push(p.shift())}function term(p,a,s){for(factor(p,a,s);;){var e=p[0];switch(e){case"++":case"--":case"!":case"*":case"/":case"%":p.shift(),factor(p,a,s),a.push(e);break;default:return}}}function expression(p,a,s){for(term(p,a,s);;){var e=p[0];switch(e){case">>=":case"<<=":case"==":case"!=":case"&&":case"||":case">>":case"<<":p.shift(),factor(p,a,s),a.push(e);break;case"=":case"+=":case"-=":case"%=":case"^=":case"&=":case"|=":case"&=":case"|=":p.shift(),s.push(e),s.push(a.pop()),factor(p,a,s);break;default:if(-1!="+-&^|<>".indexOf(e))p.shift(),term(p,a,s),a.push(e);else for(;;){var e=s[0];switch(e){case"=":case"+=":case"-=":case"%=":case"^=":case"&=":case"|=":case"&=":case"|=":s.shift(),a.push(s.shift()),a.push(e);break;default:return}}}}}function GetParam(p,a){var s=split_formula(p),e=0;if(a)1==s.length&&(e=s[0],var_name.push(e),var_node.push(brNode),var_data.push(null),var_cnt++);else{var r=get_postfix(s);e=calcPostfix(r)}return e}function varfnd0(p){for(var a=0;a<var_node.length;a++)if(var_node[a]==brNode&&var_name[a]==p)return a;return-1}function varfnd(p){var a=varfnd0(p,brNode);if(-1!=a)return a;for(var s=0;s<var_node.length;s++)if(var_node[s]<brNode&&var_name[s]==p)return s;return-1}function varDelNode(p){for(var a=0;a<var_node.length;a++)var_node[a]==p&&(var_name.splice(a,1),var_node.splice(a,1),var_data.splice(a,1))}function popStc(p){return varGet(p.pop())}